bun test v1.0.35 (940448d6)

test/features.test.ts:
(pass) Resolve DID at time (first) [3.31ms]
(pass) Resolve DID at time (second) [1.86ms]
(pass) Resolve DID at time (third) [2.39ms]
(pass) Resolve DID at time (last) [3.49ms]
(pass) Resolve DID at version [1.07ms]
(pass) Resolve DID latest [2.65ms]

test/not-so-happy-path.test.ts:
(pass) Update with wrong key fails resolution [4.46ms]

test/happy-path.test.ts:
(pass) Create DID (2 keys + domain) [1.92ms]
Resolved DID Document: 1 did:tdw:example.com:en6dfezxz8yvudnyb5pq9a6g {
  "@context": [ "https://www.w3.org/ns/did/v1", "https://w3id.org/security/multikey/v1"
  ],
  id: "did:tdw:example.com:en6dfezxz8yvudnyb5pq9a6g",
  controller: "did:tdw:example.com:en6dfezxz8yvudnyb5pq9a6g",
  authentication: [ "did:tdw:example.com:en6dfezxz8yvudnyb5pq9a6g#5b48Zj6B" ],
  assertionMethod: [ "did:tdw:example.com:en6dfezxz8yvudnyb5pq9a6g#CpsUrTh3" ],
  verificationMethod: [
    {
      id: "did:tdw:example.com:en6dfezxz8yvudnyb5pq9a6g#5b48Zj6B",
      controller: "did:tdw:example.com:en6dfezxz8yvudnyb5pq9a6g",
      type: "Multikey",
      publicKeyMultibase: "z6Mkw1KSvGWNAwSwWbcpwPgFARX4vKPa1xvcDMsJ5b48Zj6B",
    }, {
      id: "did:tdw:example.com:en6dfezxz8yvudnyb5pq9a6g#CpsUrTh3",
      controller: "did:tdw:example.com:en6dfezxz8yvudnyb5pq9a6g",
      type: "Multikey",
      publicKeyMultibase: "z6MkuocstfAaHsJgRnQgfQdtJiECuWEMDAbQV61aCpsUrTh3",
    }
  ],
}
(pass) Resolve DID version 1 [2.33ms]
(pass) Update DID (2 keys, 1 service, change domain) [3.26ms]
Resolved DID Document: 2 did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g {
  "@context": [ "https://www.w3.org/ns/did/v1", "https://w3id.org/security/multikey/v1",
    "https://identity.foundation/linked-vp/contexts/v1"
  ],
  id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
  controller: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g" ],
  authentication: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#gJqvqaYD"
  ],
  assertionMethod: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#CZSeAWLE"
  ],
  verificationMethod: [
    {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#gJqvqaYD",
      controller: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
      type: "Multikey",
      publicKeyMultibase: "z6MksNvDtgMutKMzjezRqj8JbYuCHNjHR5HBaF2ogJqvqaYD",
    }, {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#CZSeAWLE",
      controller: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
      type: "Multikey",
      publicKeyMultibase: "z6Mkq7Qoa2LCvLCUiq9W2J9vXH1ooDqSX2ehWGUzCZSeAWLE",
    }
  ],
  service: [
    {
      id: "did:tdw:example.com:en6dfezxz8yvudnyb5pq9a6g#whois",
      type: "LinkedVerifiablePresentation",
      serviceEndpoint: [ "https://example.com/docs/en6dfezxz8yvudnyb5pq9a6g/whois.json"
      ],
    }
  ],
}
(pass) Resolve DID version 2 [3.74ms]
(pass) Update DID (3 keys, 2 services) [5.54ms]
Resolved DID Document: 3 did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g {
  "@context": [ "https://www.w3.org/ns/did/v1", "https://w3id.org/security/multikey/v1",
    "https://identity.foundation/linked-vp/contexts/v1", "https://didcomm.org/messaging/v2"
  ],
  id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
  controller: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g" ],
  authentication: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#9vYyiXiJ"
  ],
  assertionMethod: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#kkHS31Z4"
  ],
  verificationMethod: [
    {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#9vYyiXiJ",
      controller: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
      type: "Multikey",
      publicKeyMultibase: "z6Mkr2D4ixckmQx8tAVvXEhMuaMhzahxe61qJt7G9vYyiXiJ",
    }, {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#kkHS31Z4",
      controller: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
      type: "Multikey",
      publicKeyMultibase: "z6MkjnDzaWSBfQFmzyPvhcaABbEBQiuCBRdyQNq5kkHS31Z4",
    }, {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#qnYZ6fWH",
      controller: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
      type: "Multikey",
      publicKeyMultibase: "z6LSdYjdAE7ZY1Gh5VPAxDJdgbg45Lq6im3N9o6HqnYZ6fWH",
    }
  ],
  service: [
    {
      id: "did:tdw:example.com:en6dfezxz8yvudnyb5pq9a6g#whois",
      type: "LinkedVerifiablePresentation",
      serviceEndpoint: [ "https://example.com/docs/en6dfezxz8yvudnyb5pq9a6g/whois.json"
      ],
    }, {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#didcomm",
      type: "DIDCommMessaging",
      serviceEndpoint: {
        uri: "https://example.com/didcomm",
        accept: [ "didcomm/v2", "didcomm/aip2;env=rfc587" ],
        routingKeys: [ "did:example:somemediator#somekey" ],
      },
    }
  ],
  keyAgreement: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#qnYZ6fWH"
  ],
}
(pass) Resolve DID version 3 [2.94ms]
(pass) Update DID (add alsoKnownAs) [5.19ms]
Resolved DID Document: 4 did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g {
  "@context": [ "https://www.w3.org/ns/did/v1", "https://w3id.org/security/multikey/v1",
    "https://identity.foundation/linked-vp/contexts/v1", "https://didcomm.org/messaging/v2"
  ],
  id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
  controller: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g" ],
  authentication: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#4jDJpwPh"
  ],
  assertionMethod: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#DuAWQAnf"
  ],
  verificationMethod: [
    {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#4jDJpwPh",
      controller: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
      type: "Multikey",
      publicKeyMultibase: "z6MkkmrDWT9n8rmAVfEvuyBFroc6RFNffAoycrLw4jDJpwPh",
    }, {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#DuAWQAnf",
      controller: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
      type: "Multikey",
      publicKeyMultibase: "z6MkhoA3GQu8Sek1GFrMpmZNFxy2fSXVzzMggdndDuAWQAnf",
    }, {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#CAHUs8cU",
      controller: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
      type: "Multikey",
      publicKeyMultibase: "z6LSh1TgaytstJw2EnB8gRTZjJaHRVrUQ9K3SAofCAHUs8cU",
    }
  ],
  service: [
    {
      id: "did:tdw:example.com:en6dfezxz8yvudnyb5pq9a6g#whois",
      type: "LinkedVerifiablePresentation",
      serviceEndpoint: [ "https://example.com/docs/en6dfezxz8yvudnyb5pq9a6g/whois.json"
      ],
    }, {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#didcomm",
      type: "DIDCommMessaging",
      serviceEndpoint: {
        uri: "https://example.com/didcomm",
        accept: [ "didcomm/v2", "didcomm/aip2;env=rfc587" ],
        routingKeys: [ "did:example:somemediator#somekey" ],
      },
    }
  ],
  keyAgreement: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#CAHUs8cU"
  ],
  alsoKnownAs: [ "did:web:example.com" ],
}
(pass) Resolve DID version 4 [3.09ms]
(pass) Update DID (add external controller) [7.37ms]
Resolved DID Document: 5 did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g {
  "@context": [ "https://www.w3.org/ns/did/v1", "https://w3id.org/security/multikey/v1",
    "https://identity.foundation/linked-vp/contexts/v1", "https://didcomm.org/messaging/v2"
  ],
  id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
  controller: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g", "did:key:z6MktpbfYB3usrBJYN5uEou8o3iFfurWTCWUHEMHUn97YusZ"
  ],
  authentication: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#BgxQ25XL",
    "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#Un97YusZ"
  ],
  assertionMethod: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#fdPocsYi"
  ],
  verificationMethod: [
    {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#BgxQ25XL",
      controller: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
      type: "Multikey",
      publicKeyMultibase: "z6MkhGC8KFeSQq8y7Jt2wUgyyTgwJAbMt16gKEwCBgxQ25XL",
    }, {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#Un97YusZ",
      controller: "did:key:z6MktpbfYB3usrBJYN5uEou8o3iFfurWTCWUHEMHUn97YusZ",
      type: "Multikey",
      publicKeyMultibase: "z6MktpbfYB3usrBJYN5uEou8o3iFfurWTCWUHEMHUn97YusZ",
    }, {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#fdPocsYi",
      controller: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
      type: "Multikey",
      publicKeyMultibase: "z6MkvVjSMp6xsghjQP54WndyEAjKHduUVxxqm1oMfdPocsYi",
    }, {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#p5GH9pb7",
      controller: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g",
      type: "Multikey",
      publicKeyMultibase: "z6LSrrmqwqyj27zSwHqzhEDbiYk3JbhHyzmnDPD4p5GH9pb7",
    }
  ],
  service: [
    {
      id: "did:tdw:example.com:en6dfezxz8yvudnyb5pq9a6g#whois",
      type: "LinkedVerifiablePresentation",
      serviceEndpoint: [ "https://example.com/docs/en6dfezxz8yvudnyb5pq9a6g/whois.json"
      ],
    }, {
      id: "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#didcomm",
      type: "DIDCommMessaging",
      serviceEndpoint: {
        uri: "https://example.com/didcomm",
        accept: [ "didcomm/v2", "didcomm/aip2;env=rfc587" ],
        routingKeys: [ "did:example:somemediator#somekey" ],
      },
    }
  ],
  keyAgreement: [ "did:tdw:migrated.example.com:en6dfezxz8yvudnyb5pq9a6g#p5GH9pb7"
  ],
  alsoKnownAs: [ "did:web:example.com" ],
}
(pass) Resolve DID version 5 [6.07ms]

 17 pass
 0 fail
 53 expect() calls
Ran 17 tests across 3 files. [192.00ms]
